var chambaId;jQuery(document).ready(function(){function e(e){var a=JSON.parse(localStorage.getItem("clients"));if(a&&0!=a.length){for(var t=jQuery("#clients"),i=!1,l=0;l<a.length;l++){var o=a[l].firstName+" "+a[l].lastName;t.append('<option value="'+o+'"/>'),i||o!=e||(i=!0)}i||(t.empty(),jQuery("#save").prop("disabled",!0),jQuery("#modal").modal("show"))}else jQuery("#save").prop("disabled",!0),jQuery("#modal").modal("show")}function a(){var e=JSON.parse(localStorage.getItem("chambas"));for(i=0;i<e.length;i++)if(e[i].id===chambaId)return e.splice(i,1),localStorage.setItem("chambas",JSON.stringify(e)),i}function t(e,a){var t=JSON.parse(window.localStorage.getItem("chambas"));t?(t.splice(a,0,e),window.localStorage.setItem("chambas",JSON.stringify(t))):window.localStorage.setItem("chambas",JSON.stringify([e]))}!function(){var a=localStorage.getItem("logged_user");jQuery("#menu-user-name").html("Hi "+a),"admin"!==a&&jQuery(".user-item-to-hide").hide(),chambaId=window.location.search.substr("?id=".length);for(var t,i=JSON.parse(localStorage.getItem("chambas")),l=0;l<i.length;l++){var o=i[l];if(o.id===chambaId){t=o.clientName,jQuery("#clients-list").val(t),jQuery("#date").val(o.date),jQuery("#details").val(o.details),jQuery("#notes").val(o.notes);break}}e(t)}(),jQuery("#logout").click(function(){localStorage.removeItem("logged_user"),window.location.replace("index.html")}),jQuery("#btn-new").click(function(){window.location.replace("agregar-chamba.html")}),jQuery("#cancel").click(function(){window.location.replace("chambas.html")});var l=function(e,a,t,i,l){this.id=e,this.clientName=a,this.date=t,this.details=i,this.notes=l};jQuery("form").submit(function(e){e.preventDefault();var i=jQuery("#clients-list").val(),o=jQuery("#date").val(),r=jQuery("#details").val(),n=jQuery("#notes").val(),c=new l(chambaId,i,o,r,n),s=a();t(c,s),window.location.replace("chambas.html?action=updated")})});