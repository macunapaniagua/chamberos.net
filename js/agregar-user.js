jQuery(document).ready(function(){function e(e){var a=JSON.parse(window.localStorage.getItem("users"));if(a){if(r(e.username,a))return!1;a.push(e),window.localStorage.setItem("users",JSON.stringify(a))}else window.localStorage.setItem("users",JSON.stringify([e]));return!0}function r(e,r){for(i=0;i<r.length;i++)if(r[i].username===e)return!0;return!1}jQuery("#menu-user-name").html("Hi "+localStorage.getItem("logged_user")),jQuery("#logout").click(function(){localStorage.removeItem("logged_user"),window.location.replace("index.html")}),jQuery("#btn-new").click(function(){window.location.replace("agregar-user.html")}),jQuery("#cancel").click(function(){window.location.replace("users.html")});var a=function(e,r,a){this.username=e,this.name=r,this.password=a};jQuery("form").submit(function(r){r.preventDefault();var o=jQuery("#Username").val(),t=jQuery("#full-name").val(),n=jQuery("#password").val(),s=jQuery("#repeat-password").val();if("admin"===o)return jQuery("#modal-message").html('The username "admin" is not elegible. Please select another one'),void jQuery("#modal").modal("show");if(n===s){var l=new a(o,t,n);e(l)?window.location.replace("users.html?action=added"):(jQuery("#modal-message").html("There is already a user with the selected username. Please select another one"),jQuery("#modal").modal("show"))}else jQuery("#modal-message").html("The password and confirmation password must be the same"),jQuery("#modal").modal("show")})});