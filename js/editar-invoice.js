var invoiceId;jQuery(document).ready(function(){function e(e){var i=JSON.parse(localStorage.getItem("clients"));if(i&&0!=i.length){for(var t=jQuery("#clients"),a=!1,o=0;o<i.length;o++){var n=i[o].firstName+" "+i[o].lastName;t.append('<option value="'+n+'"/>'),a||n!=e||(a=!0)}a||(t.empty(),jQuery("#save").prop("disabled",!0),jQuery("#modal").modal("show"))}else jQuery("#save").prop("disabled",!0),jQuery("#modal").modal("show")}function t(){var e=JSON.parse(localStorage.getItem("invoices"));for(i=0;i<e.length;i++)if(e[i].id===invoiceId)return e.splice(i,1),localStorage.setItem("invoices",JSON.stringify(e)),i}function a(e,i){var t=JSON.parse(window.localStorage.getItem("invoices"));t?(t.splice(i,0,e),window.localStorage.setItem("invoices",JSON.stringify(t))):window.localStorage.setItem("invoices",JSON.stringify([e]))}!function(){var i=localStorage.getItem("logged_user");jQuery("#menu-user-name").html("Hi "+i),"admin"!==i&&jQuery(".user-item-to-hide").hide(),invoiceId=window.location.search.substr("?id=".length);for(var t,a=JSON.parse(localStorage.getItem("invoices")),o=0;o<a.length;o++){var n=a[o];if(n.id===invoiceId){t=n.clientName,jQuery("#clients-list").val(t),jQuery("#date").val(n.date),jQuery("#details").val(n.details),jQuery("#amount").val(n.amount);break}}e(t)}(),jQuery("#logout").click(function(){localStorage.removeItem("logged_user"),window.location.replace("index.html")}),jQuery("#btn-new").click(function(){window.location.replace("agregar-invoice.html")}),jQuery("#cancel").click(function(){window.location.replace("invoices.html")});var o=function(e,i,t,a,o){this.id=e,this.clientName=i,this.date=t,this.details=a,this.amount=o};jQuery("form").submit(function(e){e.preventDefault();var i=jQuery("#clients-list").val(),n=jQuery("#date").val(),l=jQuery("#details").val(),r=jQuery("#amount").val(),c=new o(invoiceId,i,n,l,r),s=t();a(c,s),window.location.replace("invoices.html?action=updated")})});